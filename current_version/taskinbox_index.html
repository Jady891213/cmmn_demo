<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BPMN/CMMN æŠ¥è¡¨ä»»åŠ¡ä¸­å¿ƒ - æµ…è‰²ä¸»é¢˜</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* å¼•å…¥ Inter å­—ä½“å¹¶è®¾ç½®èƒŒæ™¯è‰² */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6; /* Gray-100 Light Background */
            color: #1f2937; /* Gray-800 Default Text Color */
        }
        /* é’ˆå¯¹å³ä¾§è¯¦æƒ…æ åœ¨å°å±å¹•ä¸Šè¿›è¡Œå…¨å±å¤„ç† */
        .task-detail-container.hidden-mobile {
            display: none;
        }
        @media (min-width: 768px) {
            .task-detail-container.hidden-mobile {
                display: flex; /* ç¡®ä¿åœ¨æ¡Œé¢ç«¯æ˜¯ flex å¸ƒå±€ */
            }
            /* ç¡®ä¿å³æ çš„é¡¶éƒ¨æ“ä½œåŒºåœ¨æ»šåŠ¨æ—¶ä¿æŒå¯è§ */
            .detail-header-sticky {
                position: sticky;
                top: 0;
                z-index: 10;
            }
        }
        /* Excel æ ·å¼æ¨¡æ‹Ÿ - é€‚åº”æµ…è‰²ä¸»é¢˜ */
        .excel-like-table th, .excel-like-table td {
            border: 1px solid #d1d5db; /* Gray-300 */
            padding: 8px;
            white-space: nowrap;
        }
        .excel-like-table th {
            background-color: #e5e7eb; /* Gray-200 */
            color: #1f2937; /* Gray-800 */
            font-weight: 600;
        }
        .excel-like-table td {
            background-color: #ffffff; /* White for cell background */
            color: #374151; /* Gray-700 */
        }
        .excel-like-table td[contenteditable="true"] {
             background-color: #f3f4f6; /* Light gray for editable cells */
        }
        .excel-like-table {
            border-collapse: collapse;
            width: 100%;
        }
        /* ç¡®ä¿åˆå¹¶åçš„ä¸»æ åœ¨æ”¶èµ·çŠ¶æ€ä¸‹åªæ˜¾ç¤ºå›¾æ ‡ */
        .task-list-collapsed {
            width: 3rem !important; /* w-12 */
        }
        .task-list-expanded {
            width: 24rem !important; /* w-96 */
        }
        /* è¡¨å•å¡ç‰‡æ ·å¼ */
        .form-card {
            background-color: #ffffff;
            border: 1px solid #e5e7eb;
            border-radius: 0.5rem;
            padding: 1.5rem;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
        }
    </style>
</head>
<body class="h-screen overflow-hidden">

    <div id="app" class="h-full flex">

        <div id="task-list-container" class="task-list-expanded flex flex-col w-full md:w-96 bg-white border-r border-gray-200 overflow-y-auto transition-[width] duration-300 ease-in-out flex-shrink-0">

            <div id="task-list-header" class="sticky top-0 p-4 bg-white z-20 shadow-md border-b border-gray-200 flex-shrink-0">

                <div class="flex justify-between items-center mb-4" id="task-list-controls">
                    <h1 id="main-column-title" class="text-xl font-bold text-indigo-600 transition-opacity duration-150">ä»»åŠ¡ä¸æµç¨‹ä¸­å¿ƒ</h1>

                    <button id="toggle-main-column" onclick="toggleMainColumn()" class="p-1 rounded-full text-gray-400 hover:text-indigo-600 transition duration-150 flex-shrink-0 hidden md:block">
                        <svg id="collapse-icon" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 19l-7-7 7-7m8 14l-7-7 7-7"></path></svg>
                    </button>
                </div>

                <div id="task-list-filters" class="transition-opacity duration-300">

                    <div class="mb-4">
                        <label for="process-filter" class="text-xs font-medium uppercase text-gray-500 block mb-1">æŒ‰æµç¨‹/æ¡ˆä¾‹ç­›é€‰</label>
                        <select id="process-filter" onchange="setProcessFilter(this.value)" class="w-full p-2 rounded-lg bg-gray-100 border border-gray-300 focus:ring-indigo-500 focus:border-indigo-500 text-sm text-gray-800">
                            </select>
                    </div>

                    <div class="flex space-x-2 mb-3">
                        <button id="tab-pending" onclick="setTaskFilter('Pending')" class="flex-1 p-2 rounded-lg bg-indigo-600 text-white font-semibold text-sm transition duration-150 shadow-md">å¾…åŠä»»åŠ¡</button>
                        <button id="tab-completed" onclick="setTaskFilter('Completed')" class="flex-1 p-2 rounded-lg bg-gray-200 text-gray-600 font-semibold text-sm hover:bg-gray-300 transition duration-150">å·²åŠä»»åŠ¡</button>
                    </div>

                    <input type="text" id="task-search" oninput="renderTaskList()" placeholder="æœç´¢ä»»åŠ¡æ ‡é¢˜ / æµç¨‹åç§°..." class="w-full p-2 rounded-lg bg-gray-100 border border-gray-300 focus:ring-indigo-500 focus:border-indigo-500 text-sm placeholder-gray-500 text-gray-800">
                </div>
            </div>

            <div id="tasks-container" class="flex-grow transition-opacity duration-300">
                </div>
        </div>

        <div id="task-detail" class="task-detail-container flex-grow flex-col bg-gray-50 overflow-y-auto relative transition-all duration-300 ease-in-out hidden-mobile">
            <button id="back-to-inbox" class="md:hidden absolute top-4 left-4 p-2 rounded-full bg-indigo-600 hover:bg-indigo-700 text-white z-30 shadow-lg">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
            </button>

            <div id="detail-content" class="flex flex-col h-full">
                <div class="flex-grow flex flex-col">
                    <div class="text-center py-16 text-gray-500" id="initial-message">
                        <svg class="w-12 h-12 mx-auto mb-3 text-indigo-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8m-17 4v10a2 2 0 002 2h12a2 2 0 002-2v-10"></path></svg>
                        <p class="text-xl font-medium">è¯·ä»å·¦æ é€‰æ‹©ä¸€ä¸ªä»»åŠ¡è¿›è¡Œå¤„ç†ã€‚</p>
                        <p class="text-sm">ä»»åŠ¡è¯¦æƒ…ã€æŠ¥è¡¨åˆ—è¡¨å’Œ Excel æŠ¥è¡¨è¯¦æƒ…å°†åœ¨æ­¤å¤„åŠ¨æ€åŠ è½½ã€‚</p>
                    </div>
                    <div id="task-data-view" class="h-full w-full hidden flex-col">
                        <div id="detail-header" class="detail-header-sticky p-6 bg-white rounded-b-lg shadow-lg border-b border-gray-200 flex justify-between items-start">

                            <div class="flex-grow pr-4">
                                <h2 id="task-title-display" class="text-2xl font-extrabold text-gray-900"></h2>
                                <p id="task-desc-display" class="text-sm text-gray-500 mt-1"></p>
                            </div>

                            <div class="flex flex-col sm:flex-row gap-2 mt-1 flex-shrink-0">
                                <button onclick="handleTaskAction(activeTaskId, 'Complete')" class="px-4 py-2 bg-indigo-600 text-white font-semibold rounded-lg shadow-md hover:bg-indigo-700 transition duration-200 flex items-center text-sm">
                                    <svg class="w-4 h-4 inline-block mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                    å®Œæˆ/æäº¤
                                </button>
                                <button onclick="handleTaskAction(activeTaskId, 'Reject')" class="px-4 py-2 bg-red-600 text-white font-semibold rounded-lg shadow-md hover:bg-red-700 transition duration-200 flex items-center text-sm">
                                    <svg class="w-4 h-4 inline-block mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                                    æ‹’ç»/é€€å›
                                </button>
                                <button onclick="handleTaskAction(activeTaskId, 'Delegate')" class="px-4 py-2 bg-gray-300 text-gray-700 font-semibold rounded-lg shadow-md hover:bg-gray-400 transition duration-200 flex items-center text-sm">
                                    å§”æ´¾
                                </button>
                            </div>
                        </div>

                        <div id="detail-split-container" class="flex flex-grow overflow-hidden pt-4 px-6 pb-6">
                            <div id="report-nav" class="w-1/4 max-w-xs bg-white p-4 rounded-l-lg overflow-y-auto border-r border-gray-200 shadow-inner flex-shrink-0">
                                <h3 class="text-lg font-semibold mb-3 text-indigo-600">æŠ¥è¡¨åˆ—è¡¨</h3>

                                <div class="flex space-x-2 mb-4">
                                    <select id="year-filter" class="w-1/2 p-2 rounded-lg bg-gray-100 text-sm border border-gray-300 focus:ring-indigo-500 focus:border-indigo-500 text-gray-800">
                                        <option value="2026">2026 å¹´</option>
                                        <option value="2025" selected>2025 å¹´</option>
                                    </select>
                                    <select id="month-filter" class="w-1/2 p-2 rounded-lg bg-gray-100 text-sm border border-gray-300 focus:ring-indigo-500 focus:border-indigo-500 text-gray-800">
                                        <option value="12">12 æœˆ</option>
                                        <option value="11" selected>11 æœˆ</option>
                                        <option value="10">10 æœˆ</option>
                                    </select>
                                </div>
                                <div id="report-list-container" class="space-y-2">
                                    </div>
                            </div>

                            <div id="report-detail" class="flex-grow bg-white p-6 overflow-auto shadow-lg rounded-r-lg">
                                <h3 id="report-detail-title" class="text-lg font-semibold mb-4 text-gray-900">è¯·åœ¨å·¦ä¾§é€‰æ‹©ä¸€ä¸ªæŠ¥è¡¨</h3>
                                <div id="excel-editor" class="text-sm">
                                    </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <script>
        // æ¨¡æ‹Ÿä»»åŠ¡æ•°æ®
        const mockTasks = [
            // Report Task
            { id: 1, title: "Q4 é¢„ç®—å¤æ ¸åŠæŠ¥è¡¨å¡«å†™", process: "è´¢åŠ¡é¢„ç®— V2", applicant: "ææ˜", dueDate: "2025-11-17", priority: "High", type: "Report", status: "Pending", content: "è¯·å¤æ ¸å¹¶æ‰¹å‡†2026å¹´åº¦éƒ¨é—¨é¢„ç®—è‰æ¡ˆï¼Œéœ€å¡«å†™ä¸‰ä¸ªå…³è”æŠ¥è¡¨ã€‚", icon: 'ğŸ’¸',
              reports: [
                  { id: 'R1', name: 'éƒ¨é—¨è´¹ç”¨é¢„ç®—è¡¨', data: 'Data for R1', active: true },
                  { id: 'R2', name: 'èµ„æœ¬æ”¯å‡ºç”³è¯·è¡¨', data: 'Data for R2', active: false },
                  { id: 'R3', name: 'å‘˜å·¥è–ªé…¬é¢„æµ‹è¡¨', data: 'Data for R3', active: false },
                  { id: 'R4', name: 'å·®æ—…æŠ¥é”€æ±‡æ€»è¡¨', data: 'Data for R4', active: false },
                  { id: 'R5', name: 'å¸‚åœºæ¨å¹¿è´¹ç”¨æŠ¥è¡¨', data: 'Data for R5', active: false }
              ]
            },
            // DataEntry Task (éæŠ¥è¡¨ä»»åŠ¡, å•ä¸€è¡¨å•)
            { id: 2, title: "ITèµ„äº§é‡‡è´­é…ç½®è¡¨å½•å…¥", process: "é‡‡è´­è¯·æ±‚", applicant: "å¼ å", dueDate: "2025-11-19", priority: "Medium", type: "DataEntry", status: "Pending", content: "éœ€è¦å½•å…¥ä¸‰å°æ–°æœåŠ¡å™¨çš„è¯¦ç»†é…ç½®å’Œä¾›åº”å•†ä¿¡æ¯ã€‚éæŠ¥è¡¨ä»»åŠ¡ã€‚", icon: 'ğŸ’»', reports: [] },
            // Checklist Task (éæŠ¥è¡¨ä»»åŠ¡, ç®€å•å®¡æ ¸)
            { id: 3, title: "æ–°å‘˜å·¥å…¥èŒææ–™æ¸…å•ç¡®è®¤", process: "äººåŠ›èµ„æºå…¥èŒæµç¨‹", applicant: "ç‹èŠ³", dueDate: "2025-11-28", priority: "High", type: "Checklist", status: "Pending", content: "ç¡®è®¤æ–°å‘˜å·¥ï¼ˆé™ˆæ‚¦ï¼‰æ‰€æœ‰å…¥èŒææ–™å·²æäº¤å’Œå½’æ¡£ã€‚å·¥å·ï¼šHR801ã€‚", icon: 'ğŸ‘¶', reports: [] },
            // Review Task (éæŠ¥è¡¨ä»»åŠ¡, æ–‡æœ¬è¾“å…¥)
            { id: 4, title: "åˆåŒæ¡æ¬¾ä¿®è®¢åé¦ˆ", process: "æ³•å¾‹å®¡æŸ¥", applicant: "èµµä¸½", dueDate: "2025-12-01", priority: "Low", type: "Review", status: "Pending", content: "é’ˆå¯¹é”€å”®åˆåŒæ¨¡æ¿çš„ç¬¬5æ¡è¿›è¡Œæ³•å¾‹å®¡æŸ¥å¹¶æå‡ºä¿®æ”¹æ„è§ã€‚", icon: 'ğŸ“', reports: [] },
            // Report Task
            { id: 5, title: "ç³»ç»Ÿæ•…éšœæŠ¥å‘Šå¤„ç†åŠå¡«å†™", process: "ç³»ç»Ÿäº‹ä»¶å¤„ç†", applicant: "ç³»ç»Ÿç®¡ç†å‘˜", dueDate: "2025-12-05", priority: "High", type: "Report", status: "Pending", content: "SaaSå¹³å°æ ¸å¿ƒæœåŠ¡å®•æœºï¼Œè¯·ç«‹å³å¼€å§‹æ•…éšœå¤„ç†æµç¨‹å¹¶è®°å½•æ‰€æœ‰æ­¥éª¤ï¼Œéœ€å¡«å†™äº‹æ•…æŠ¥å‘Šè¡¨ã€‚", icon: 'ğŸš¨',
              reports: [{ id: 'R6', name: 'äº‹æ•…åŸå› åˆ†ææŠ¥å‘Š', data: 'Data for R6', active: true }, { id: 'R7', name: 'ä¿®å¤æ“ä½œæ—¥å¿—', data: 'Data for R7', active: false }] },
            // Completed Task
            { id: 6, title: "2025 Q3 ç»©æ•ˆè¯„ä¼°æäº¤", process: "äººåŠ›èµ„æºç»©æ•ˆç®¡ç†", applicant: "ææ˜", dueDate: "2025-10-30", priority: "Medium", type: "Review", status: "Completed", content: "å·²å®ŒæˆQ3ç»©æ•ˆè¯„ä¼°çš„æäº¤ã€‚", icon: 'â­', reports: [] },
        ];

        let activeTaskId = null;
        let currentFilter = 'Pending';
        let currentProcessFilter = 'All'; // æµç¨‹ç­›é€‰çŠ¶æ€ï¼Œåˆå§‹é»˜è®¤å€¼ä¸º 'All'
        let isCollapsed = false; // æŠ˜å çŠ¶æ€

        const tasksContainer = document.getElementById('tasks-container');
        const detailContainer = document.getElementById('task-detail');
        const detailContent = document.getElementById('detail-content');
        const initialMessage = document.getElementById('initial-message');
        const taskDataView = document.getElementById('task-data-view');
        const taskListContainer = document.getElementById('task-list-container');
        const mainColumnTitle = document.getElementById('main-column-title');
        const taskListFilters = document.getElementById('task-list-filters');
        const collapseIcon = document.getElementById('collapse-icon');
        const taskListControls = document.getElementById('task-list-controls');
        const reportNav = document.getElementById('report-nav'); // æŠ¥è¡¨åˆ—è¡¨å¯¼èˆªæ 
        const reportDetail = document.getElementById('report-detail'); // æŠ¥è¡¨/è¡¨å•è¯¦æƒ…æ 
        const detailSplitContainer = document.getElementById('detail-split-container'); // è¯¦æƒ…åˆ†å‰²å®¹å™¨
        const backButton = document.getElementById('back-to-inbox'); // ç§»åŠ¨ç«¯è¿”å›æŒ‰é’®
        const TODAY = new Date().setHours(0, 0, 0, 0);

        /**
         * åˆ‡æ¢ä¸»æ çš„æ”¶èµ·/å±•å¼€çŠ¶æ€
         */
        function toggleMainColumn() {
            isCollapsed = !isCollapsed;
            if (isCollapsed) {
                // 1. ä¸»æ : æ”¶ç¼©åˆ°è¾¹æ¡å®½åº¦ w-12
                taskListContainer.classList.remove('task-list-expanded');
                taskListContainer.classList.add('task-list-collapsed');
                // 2. éšè—å†…å®¹ (æ ‡é¢˜, ç­›é€‰å™¨, ä»»åŠ¡åˆ—è¡¨)
                mainColumnTitle.classList.add('hidden'); // éšè—æ ‡é¢˜
                taskListFilters.classList.add('hidden'); // éšè—ç­›é€‰å™¨
                tasksContainer.classList.add('opacity-0', 'pointer-events-none'); // éšè—åˆ—è¡¨
                // 3. è°ƒæ•´æ§åˆ¶åŒºå¸ƒå±€: ä»…æ˜¾ç¤ºæŒ‰é’®å¹¶å±…ä¸­ (ä¿®å¤ç‚¹å‡»åæ— æ³•æ‰“å¼€çš„é—®é¢˜)
                taskListControls.classList.remove('justify-between', 'mb-4');
                taskListControls.classList.add('justify-center');
                // 4. è°ƒæ•´å¤´éƒ¨ padding
                taskListHeader.classList.remove('p-4');
                taskListHeader.classList.add('py-4', 'px-3');
                // 5. æ›´æ”¹å›¾æ ‡ä¸ºå±•å¼€ (Chevron Right)
                collapseIcon.innerHTML = `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 5l7 7-7 7M5 5l7 7-7 7"></path>`;
            } else {
                // 1. ä¸»æ : æ¢å¤å®½åº¦ w-96
                taskListContainer.classList.remove('task-list-collapsed');
                taskListContainer.classList.add('task-list-expanded');
                // 2. æ˜¾ç¤ºå†…å®¹
                mainColumnTitle.classList.remove('hidden');
                taskListFilters.classList.remove('hidden');
                tasksContainer.classList.remove('opacity-0', 'pointer-events-none');
                // 3. è°ƒæ•´æ§åˆ¶åŒºå¸ƒå±€: æ¢å¤
                taskListControls.classList.add('justify-between', 'mb-4');
                taskListControls.classList.remove('justify-center');
                // 4. è°ƒæ•´å¤´éƒ¨ padding
                taskListHeader.classList.add('p-4');
                taskListHeader.classList.remove('py-4', 'px-3');
                // 5. æ›´æ”¹å›¾æ ‡ä¸ºæ”¶èµ· (Chevron Left)
                collapseIcon.innerHTML = `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 19l-7-7 7-7m8 14l-7-7 7-7"></path>`;
            }
        }

        /**
         * åˆ›å»ºä»»åŠ¡åˆ—è¡¨é¡¹çš„ HTML ç»“æ„
         */
        function createTaskItemHtml(task, isUrgent) {
            const dueDate = new Date(task.dueDate).setHours(0, 0, 0, 0);
            const isTodayOrTomorrow = dueDate <= TODAY + (2 * 24 * 60 * 60 * 1000); // 3å¤©å†…æˆªæ­¢
            const priorityColor = task.priority === 'High' ? 'bg-red-500' : task.priority === 'Medium' ? 'bg-amber-500' : 'bg-gray-400';
            const urgencyBorder = isUrgent ? 'border-red-400' : 'border-gray-200';
            const urgencyBg = isUrgent ? 'hover:bg-red-50' : 'hover:bg-gray-100';
            const dateText = isUrgent ? `<span class="text-red-600 font-semibold">${task.dueDate}</span>` : `<span class="text-gray-500">${task.dueDate}</span>`;

            return `
                <div id="task-${task.id}" onclick="selectTask(${task.id})" class="task-item flex items-start p-3 border-b ${urgencyBorder} ${urgencyBg} transition duration-150 cursor-pointer">
                    <div class="flex-shrink-0 w-8 h-8 rounded-full ${priorityColor} flex items-center justify-center text-white text-lg font-bold mr-3 mt-1">
                        ${task.icon}
                    </div>
                    <div class="flex-grow min-w-0">
                        <p class="text-sm font-semibold truncate text-gray-800">${task.title}</p>
                        <p class="text-xs text-indigo-600 truncate">${task.process}</p>
                        <div class="flex justify-between items-center mt-1">
                            <span class="text-xs text-gray-500">${task.applicant} ç”³è¯·</span>
                            <span class="text-xs">${dateText}</span>
                        </div>
                    </div>
                </div>
            `;
        }

        /**
         * è®¾ç½®ä»»åŠ¡ç­›é€‰å™¨ (å¾…åŠ/å·²åŠ)
         */
        function setTaskFilter(filter) {
            currentFilter = filter;
            document.getElementById('tab-pending').classList.remove('bg-indigo-600', 'text-white', 'bg-gray-200', 'text-gray-600');
            document.getElementById('tab-completed').classList.remove('bg-indigo-600', 'text-white', 'bg-gray-200', 'text-gray-600');

            if (filter === 'Pending') {
                document.getElementById('tab-pending').classList.add('bg-indigo-600', 'text-white', 'shadow-md');
                document.getElementById('tab-completed').classList.add('bg-gray-200', 'text-gray-600', 'hover:bg-gray-300');
            } else {
                document.getElementById('tab-pending').classList.add('bg-gray-200', 'text-gray-600', 'hover:bg-gray-300');
                document.getElementById('tab-completed').classList.add('bg-indigo-600', 'text-white', 'shadow-md');
            }
            renderTaskList();
        }

        /**
         * è®¾ç½®æµç¨‹ç­›é€‰å™¨
         */
        function setProcessFilter(processName) {
            currentProcessFilter = processName;
            renderTaskList();
        }

        /**
         * é‡æ–°è®¡ç®—æµç¨‹å’Œ Tab ä¸Šçš„è®¡æ•°
         */
        function populateProcessFilter() {
            const processCounts = { 'All': 0 };
            const select = document.getElementById('process-filter');
            select.innerHTML = `<option value="All">æ‰€æœ‰æµç¨‹ (${mockTasks.filter(t => t.status === 'Pending').length})</option>`; // Reset options
            select.value = currentProcessFilter; // Keep selection

            mockTasks.forEach(task => {
                if (task.status === 'Pending') {
                    processCounts['All']++;
                    processCounts[task.process] = (processCounts[task.process] || 0) + 1;
                }
            });

            // Populate options with counts
            Object.keys(processCounts).filter(p => p !== 'All').sort().forEach(process => {
                const count = processCounts[process];
                const option = document.createElement('option');
                option.value = process;
                option.textContent = `${process} (${count})`;
                select.appendChild(option);
            });
            // Update the "All" option text
            select.querySelector('option[value="All"]').textContent = `æ‰€æœ‰æµç¨‹ (${processCounts['All']})`;
        }


        /**
         * æ¸²æŸ“ä»»åŠ¡åˆ—è¡¨ (æ ¹æ®ç­›é€‰å’Œæœç´¢æ¡ä»¶)
         */
        function renderTaskList() {
            const searchTerm = document.getElementById('task-search').value.toLowerCase();
            const filteredTasks = mockTasks.filter(task => {
                const matchesFilter = currentFilter === 'Pending' ? task.status === 'Pending' : task.status === 'Completed';
                const matchesProcess = currentProcessFilter === 'All' || task.process === currentProcessFilter;
                const matchesSearch = task.title.toLowerCase().includes(searchTerm) || task.process.toLowerCase().includes(searchTerm);
                return matchesFilter && matchesProcess && matchesSearch;
            });

            // 1. åˆ†ç»„å¤„ç†å¾…åŠä»»åŠ¡
            const overdueTasks = [];
            const upcomingTasks = [];
            const standardTasks = [];
            const completedTasks = [];

            filteredTasks.forEach(task => {
                if (task.status === 'Pending') {
                    const dueDate = new Date(task.dueDate).setHours(0, 0, 0, 0);
                    if (dueDate < TODAY) {
                        overdueTasks.push(task);
                    } else if (dueDate <= TODAY + (3 * 24 * 60 * 60 * 1000)) { // 3å¤©å†…æˆªæ­¢
                        upcomingTasks.push(task);
                    } else {
                        standardTasks.push(task);
                    }
                } else {
                    completedTasks.push(task);
                }
            });

            const renderGroup = (tasks, title, isUrgent) => {
                if (tasks.length === 0) return '';
                let groupHtml = `<div class="p-2 pt-4 text-xs font-semibold uppercase ${isUrgent ? 'text-red-600' : 'text-gray-500'}">${title} (${tasks.length})</div>`;
                groupHtml += tasks.map(task => createTaskItemHtml(task, isUrgent)).join('');
                return groupHtml;
            };

            // 2. æ¸²æŸ“åˆ†ç»„ (æ ¹æ®å½“å‰ filter æ¸²æŸ“ä¸åŒçš„åˆ†ç»„)
            let allTasksHtml = '';
            if (currentFilter === 'Pending') {
                allTasksHtml += renderGroup(overdueTasks, 'ğŸš¨ å·²é€¾æœŸä»»åŠ¡', true);
                allTasksHtml += renderGroup(upcomingTasks, 'â³ æœ€è¿‘æˆªæ­¢ä»»åŠ¡ (3å¤©å†…)', true);
                allTasksHtml += renderGroup(standardTasks, 'å¾…å¤„ç†ä»»åŠ¡', false);
            } else {
                // Completed
                allTasksHtml += renderGroup(completedTasks, 'âœ… å·²åŠä»»åŠ¡', false);
            }

            tasksContainer.innerHTML = allTasksHtml;

            // 3. é€‰ä¸­çŠ¶æ€å¤„ç†
            if (activeTaskId) {
                const activeItem = document.getElementById(`task-${activeTaskId}`);
                if (activeItem) {
                    // æµ…è‰²ä¸»é¢˜ä¸‹çš„é€‰ä¸­æ ·å¼
                    activeItem.classList.add('bg-indigo-100', 'border-l-4', 'border-indigo-600');
                }
            }

            // 4. æ›´æ–°æµç¨‹å’ŒçŠ¶æ€ç­›é€‰å™¨ä¸Šçš„è®¡æ•°
            populateProcessFilter();
            updateTabCounts();
        }

        /**
         * æ›´æ–°å¾…åŠ/å·²åŠ Tab ä¸Šçš„ä»»åŠ¡è®¡æ•°
         */
        function updateTabCounts() {
            const pendingCount = mockTasks.filter(t => t.status === 'Pending').length;
            const completedCount = mockTasks.filter(t => t.status === 'Completed').length;
            document.getElementById('tab-pending').textContent = `å¾…åŠä»»åŠ¡ (${pendingCount})`;
            document.getElementById('tab-completed').textContent = `å·²åŠä»»åŠ¡ (${completedCount})`;
        }


        /**
         * æ¸²æŸ“æŠ¥è¡¨å¯¼èˆªæ 
         */
        function renderReportNavigation(task) {
            const listContainer = document.getElementById('report-list-container');
            if (!task.reports || task.reports.length === 0) {
                listContainer.innerHTML = '<p class="text-sm text-gray-500 p-2">æ­¤ä»»åŠ¡æ²¡æœ‰å…³è”æŠ¥è¡¨ã€‚</p>';
                return;
            }

            const navHtml = task.reports.map(report => {
                const activeClass = report.active ? 'bg-indigo-50 border-indigo-600 text-indigo-700 font-semibold' : 'hover:bg-gray-100 border-gray-200 text-gray-700';
                return `
                    <div onclick="selectReport(${task.id}, '${report.id}', '${report.name}')" class="p-3 border rounded-lg cursor-pointer transition duration-150 ${activeClass}">
                        <p class="text-sm">${report.name}</p>
                    </div>
                `;
            }).join('');
            listContainer.innerHTML = navHtml;
        }

        /**
         * æ¸²æŸ“ Excel æŠ¥è¡¨å†…å®¹ (æ¨¡æ‹Ÿ)
         */
        function renderExcelReport(reportId) {
            const editorContainer = document.getElementById('excel-editor');
            let tableData = [];
            let isEditable = (rowIndex, colIndex, row) => false;

            switch (reportId) {
                case 'R1': // éƒ¨é—¨è´¹ç”¨é¢„ç®—è¡¨
                    tableData = [
                        ['è´¹ç”¨ç±»å‹', '11æœˆé¢„ç®— (K)', '11æœˆå®é™… (K)', '12æœˆé¢„æµ‹ (K)', 'å¤‡æ³¨'],
                        ['äººåŠ›æˆæœ¬', 200, 205, 210, 'äººå‘˜å˜åŠ¨'],
                        ['è½¯ä»¶è®¸å¯è´¹', 50, 48, 50, 'å·²æ”¯ä»˜'],
                        ['å·®æ—…è´¹ç”¨', 30, 35, 40, 'å¾…æŠ¥é”€'],
                        ['åŠå…¬è€—æ', 10, 8, 12, ''],
                        ['æ€»è®¡', 290, 296, 312, ''] // æœ€åä¸€è¡Œä¸ºæ€»è®¡
                    ];
                    // Editable logic for R1: '12æœˆé¢„æµ‹ (K)' (index 3) and 'å¤‡æ³¨' (index 4) for non-total rows
                    isEditable = (rowIndex, colIndex, row) => rowIndex > 0 && rowIndex < tableData.length - 1 && (colIndex === 3 || colIndex === 4);
                    break;
                case 'R2': // èµ„æœ¬æ”¯å‡ºç”³è¯·è¡¨
                    tableData = [
                        ['èµ„äº§åç§°', 'å‹å·', 'æ•°é‡', 'å•ä»· (K)', 'æ€»ä»· (K)', 'æ‰¹å‡†çŠ¶æ€'],
                        ['æ–°æœåŠ¡å™¨A', 'R750', 3, 40, 120, 'å¾…æ‰¹å‡†'],
                        ['é«˜é…å·¥ä½œç«™', 'Z4 G5', 10, 15, 150, 'å·²æ‰¹å‡†'],
                        ['ç½‘ç»œå­˜å‚¨ (NAS)', 'DS920+', 1, 5, 5, 'å¾…æ‰¹å‡†']
                    ];
                    isEditable = (rowIndex, colIndex, row) => rowIndex > 0 && (colIndex === 2 || colIndex === 4);
                    break;
                case 'R6': // äº‹æ•…åŸå› åˆ†ææŠ¥å‘Š (Task 5)
                    tableData = [
                        ['é˜¶æ®µ', 'æ—¶é—´', 'æè¿°', 'è´£ä»»äºº'],
                        ['å‘ç°', '2025-12-05 10:00', 'SaaSå¹³å°æ ¸å¿ƒæœåŠ¡å®•æœºæŠ¥è­¦', 'ç›‘æ§ç³»ç»Ÿ'],
                        ['å®šçº§', '2025-12-05 10:15', 'P1 ç”Ÿäº§ç³»ç»Ÿå®Œå…¨ä¸å¯ç”¨', 'è¿ç»´ä¸»ç®¡'],
                        ['åŸå› åˆ†æ', '2025-12-05 11:30', 'æ•°æ®åº“è¿æ¥æ± è€—å°½ï¼Œæ˜¯åº”ç”¨å±‚Bugå¯¼è‡´å¾ªç¯è¯·æ±‚', 'å¼€å‘å·¥ç¨‹å¸ˆ'],
                        ['æ ¹å› ', '2025-12-05 12:00', 'é”™è¯¯çš„ç¼“å­˜é…ç½®å¯¼è‡´é€’å½’è°ƒç”¨', 'æ¶æ„å¸ˆ'],
                    ];
                    // Editable logic for R6: 'è´£ä»»äºº' (index 3)
                    isEditable = (rowIndex, colIndex, row) => rowIndex > 0 && colIndex === 3;
                    break;
                // ... å…¶ä»–æŠ¥è¡¨æ•°æ®å’Œé€»è¾‘
                default:
                    tableData = [
                        ['é¡¹ç›®', 'æ•°æ®é¡¹A', 'æ•°æ®é¡¹B', 'æ•°æ®é¡¹C', 'å¤‡æ³¨'],
                        ['ä¸€æœˆ', 100, 200, 300, ''],
                        ['äºŒæœˆ', 110, 210, 320, ''],
                        ['ä¸‰æœˆ', 120, 220, 340, ''],
                    ];
            }

            let tableHtml = `<table class="excel-like-table"><thead><tr>`;
            tableData[0].forEach(header => {
                tableHtml += `<th>${header}</th>`;
            });
            tableHtml += `</tr></thead><tbody>`;

            for (let i = 1; i < tableData.length; i++) {
                tableHtml += `<tr>`;
                for (let j = 0; j < tableData[i].length; j++) {
                    const editable = isEditable(i, j, tableData[i]);
                    const editableAttr = editable ? 'contenteditable="true"' : '';
                    const highlightClass = editable ? 'text-indigo-600 font-medium' : '';
                    tableHtml += `<td ${editableAttr} class="${highlightClass}">${tableData[i][j]}</td>`;
                }
                tableHtml += `</tr>`;
            }
            tableHtml += `</tbody></table>`;
            editorContainer.innerHTML = tableHtml;
        }

        /**
         * æ¸²æŸ“éæŠ¥è¡¨ä»»åŠ¡çš„è‡ªå®šä¹‰è¡¨å• (æ¨¡æ‹Ÿ)
         */
        function renderCustomForm(task) {
            const editorContainer = document.getElementById('excel-editor');
            let formHtml = `<div class="form-card space-y-4">`;

            if (task.type === 'DataEntry') {
                // ITèµ„äº§é‡‡è´­é…ç½®è¡¨å½•å…¥
                formHtml += `
                    <div>
                        <label for="vendor" class="block text-sm font-medium text-gray-700">ä¾›åº”å•†åç§°</label>
                        <input type="text" id="vendor" value="XXç§‘æŠ€ï¼ˆåŒ—äº¬ï¼‰æœ‰é™å…¬å¸" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500">
                    </div>
                    <div>
                        <label for="server_model" class="block text-sm font-medium text-gray-700">æœåŠ¡å™¨å‹å·/é…ç½®</label>
                        <textarea id="server_model" rows="4" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500" placeholder="E.g., 3x Dell PowerEdge R750, 1TB RAM, 10x1.2TB SSD">${task.content.includes("ä¸‰å°æ–°æœåŠ¡å™¨") ? "3x Dell PowerEdge R750\n1TB RAM\n10x1.2TB SSD" : task.content}</textarea>
                    </div>
                    <div class="flex space-x-4">
                        <div class="flex-1">
                            <label for="total_cost" class="block text-sm font-medium text-gray-700">æ€»é‡‡è´­æˆæœ¬ (RMB)</label>
                            <input type="number" id="total_cost" value="125000" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500">
                        </div>
                        <div class="flex-1">
                            <label for="install_date" class="block text-sm font-medium text-gray-700">é¢„è®¡åˆ°è´§/å®‰è£…æ—¥æœŸ</label>
                            <input type="date" id="install_date" value="2025-12-10" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500">
                        </div>
                    </div>
                `;
            } else if (task.type === 'Checklist') {
                // æ–°å‘˜å·¥å…¥èŒææ–™æ¸…å•ç¡®è®¤
                formHtml += `
                    <div>
                        <p class="block text-sm font-medium text-gray-700 mb-2">å¾…ç¡®è®¤ææ–™æ¸…å• (æ–°å‘˜å·¥ï¼šé™ˆæ‚¦ / å·¥å·ï¼šHR801)</p>
                        <div class="space-y-2">
                            <label class="flex items-center">
                                <input type="checkbox" checked class="form-checkbox h-5 w-5 text-indigo-600">
                                <span class="ml-2 text-gray-700">åŠ³åŠ¨åˆåŒåŸä»¶å½’æ¡£</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" checked class="form-checkbox h-5 w-5 text-indigo-600">
                                <span class="ml-2 text-gray-700">èº«ä»½è¯æ˜å¤å°ä»¶</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" class="form-checkbox h-5 w-5 text-indigo-600">
                                <span class="ml-2 text-gray-700">å…¥èŒä½“æ£€æŠ¥å‘Š</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" class="form-checkbox h-5 w-5 text-indigo-600">
                                <span class="ml-2 text-gray-700">ç¤¾ä¿/å…¬ç§¯é‡‘è´¦æˆ·ä¿¡æ¯ç™»è®°è¡¨</span>
                            </label>
                        </div>
                    </div>
                `;
            } else if (task.type === 'Review') {
                // åˆåŒæ¡æ¬¾ä¿®è®¢åé¦ˆ
                formHtml += `
                    <div>
                        <p class="text-sm font-medium text-gray-700 mb-2">åˆåŒæ¡æ¬¾ (ç¬¬5æ¡) åŸæ–‡:</p>
                        <div class="bg-gray-100 p-3 rounded-md border border-gray-300 text-sm text-gray-600 italic mb-4">
                            "ç”²æ–¹åº”åœ¨æ”¶åˆ°ä¹™æ–¹ä¹¦é¢é€šçŸ¥åï¼Œäºä¸ƒä¸ªå·¥ä½œæ—¥å†…å®Œæˆä»˜æ¬¾ã€‚ä»»ä½•å»¶è¿Ÿå°†å¯¼è‡´åˆåŒç»ˆæ­¢ã€‚"
                        </div>
                    </div>
                    <div>
                        <label for="review_feedback" class="block text-sm font-medium text-gray-700">æ³•å¾‹å®¡æŸ¥åé¦ˆ / ä¿®è®¢æ„è§</label>
                        <textarea id="review_feedback" rows="6" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500" placeholder="è¯·åœ¨æ­¤å¤„è¾“å…¥æ‚¨çš„å®¡æŸ¥æ„è§å’Œå»ºè®®çš„ä¿®è®¢ç‰ˆæœ¬...">å»ºè®®å°†ä»˜æ¬¾æœŸé™ä¿®æ”¹ä¸º 'åä¸ªå·¥ä½œæ—¥'ï¼Œå¹¶å¢åŠ ä¸å¯æŠ—åŠ›æ¡æ¬¾çš„è±å…å£°æ˜ã€‚</textarea>
                    </div>
                `;
            } else {
                formHtml += `<p class="text-sm text-gray-500">æ­¤ä»»åŠ¡ç±»å‹ä¸º ${task.type}ï¼Œæ²¡æœ‰éœ€è¦å¡«å†™çš„ç‰¹æ®Šè¡¨å•ã€‚</p>`;
            }

            formHtml += `</div>`;

            // ç»Ÿä¸€è®¾ç½®æ ‡é¢˜
            document.getElementById('report-detail-title').textContent = `ğŸ“„ ${task.title} - è¯¦æƒ…è¡¨å•`;
            editorContainer.innerHTML = formHtml;
        }

        /**
         * é€‰ä¸­ä»»åŠ¡
         */
        function selectTask(taskId) {
            const task = mockTasks.find(t => t.id === taskId);
            if (!task) return;

            // 1. ç§»é™¤æ‰€æœ‰é€‰ä¸­æ ·å¼
            document.querySelectorAll('.task-item').forEach(item => {
                item.classList.remove('bg-indigo-100', 'border-l-4', 'border-indigo-600');
            });

            // 2. æ·»åŠ å½“å‰é€‰ä¸­æ ·å¼
            const activeItem = document.getElementById(`task-${taskId}`);
            if (activeItem) {
                activeItem.classList.add('bg-indigo-100', 'border-l-4', 'border-indigo-600');
            }

            // 3. æ¸²æŸ“è¯¦æƒ…
            renderTaskDetail(task);

            // 4. ç§»åŠ¨ç«¯åˆ‡æ¢ï¼šæ˜¾ç¤ºè¯¦æƒ…æ ï¼Œéšè—åˆ—è¡¨æ 
            if (window.innerWidth < 768) {
                detailContainer.classList.remove('hidden-mobile');
                taskListContainer.classList.add('hidden');
                backButton.onclick = () => {
                    detailContainer.classList.add('hidden-mobile');
                    taskListContainer.classList.remove('hidden');
                };
            }
        }

        /**
         * æ¸²æŸ“ä»»åŠ¡è¯¦æƒ… (å³æ )
         */
        function renderTaskDetail(task) {
            activeTaskId = task.id; // ç¡®ä¿ activeTaskId å§‹ç»ˆä¸å½“å‰æ¸²æŸ“çš„ä»»åŠ¡åŒ¹é…
            initialMessage.classList.add('hidden'); // éšè—åˆå§‹æç¤º
            taskDataView.classList.remove('hidden');

            // 1. é¡¶éƒ¨æ“ä½œåŒº
            document.getElementById('task-title-display').textContent = task.title;
            document.getElementById('task-desc-display').innerHTML = `
                <span class="font-semibold text-gray-700">${task.process}</span>
                <span class="mx-2 text-gray-300">|</span>
                <span class="text-gray-500">æˆªæ­¢æ—¥æœŸ: ${task.dueDate}</span>
                <span class="mx-2 text-gray-300">|</span>
                <span class="text-gray-500">ä¼˜å…ˆçº§: ${task.priority}</span>
            `;

            // 2. æŠ¥è¡¨/è¡¨å•å†…å®¹åŒº
            if (task.type === 'Report' && task.reports && task.reports.length > 0) {
                // æŠ¥è¡¨ä»»åŠ¡: æ˜¾ç¤ºæŠ¥è¡¨å¯¼èˆªå’Œè¯¦æƒ…
                reportNav.classList.remove('hidden');
                reportDetail.classList.add('rounded-r-lg');
                reportDetail.classList.remove('rounded-lg');
                detailSplitContainer.classList.add('flex-row');

                renderReportNavigation(task); // æ¸²æŸ“æŠ¥è¡¨åˆ—è¡¨

                // é»˜è®¤é€‰ä¸­ç¬¬ä¸€ä¸ªæŠ¥è¡¨
                const firstReport = task.reports.find(r => r.active) || task.reports[0];
                if (firstReport) {
                     document.getElementById('report-detail-title').textContent = `ğŸ“ ${firstReport.name} - å¡«å†™/ä¿®æ”¹`;
                     renderExcelReport(firstReport.id);
                }

            } else {
                // éæŠ¥è¡¨ä»»åŠ¡: éšè—æŠ¥è¡¨å¯¼èˆª, æ¸²æŸ“è‡ªå®šä¹‰è¡¨å•
                reportNav.classList.add('hidden');
                // ç¡®ä¿è¯¦æƒ…åŒºåŸŸç‹¬å æ•´ä¸ªç©ºé—´
                reportDetail.classList.remove('rounded-r-lg');
                reportDetail.classList.add('rounded-lg');
                detailSplitContainer.classList.remove('flex-row');
                renderCustomForm(task); // æ¸²æŸ“è‡ªå®šä¹‰è¡¨å•
            }
        }

        /**
         * é€‰ä¸­æŠ¥è¡¨
         */
        function selectReport(taskId, reportId, reportName) {
            const task = mockTasks.find(t => t.id === taskId);
            if (task && task.reports) {
                // 1. æ›´æ–°é€‰ä¸­çŠ¶æ€æ•°æ®
                task.reports.forEach(r => r.active = (r.id === reportId));
                // 2. æ›´æ–°å³ä¾§æ ‡é¢˜å’Œå†…å®¹
                document.getElementById('report-detail-title').textContent = `ğŸ“ ${reportName} - å¡«å†™/ä¿®æ”¹`;
                renderExcelReport(reportId); // æ¨¡æ‹ŸåŠ è½½ Excel å†…å®¹
                // 3. é‡æ–°æ¸²æŸ“å¯¼èˆªä»¥æ›´æ–°é€‰ä¸­çŠ¶æ€
                renderReportNavigation(task);
            }
        }

        /**
         * ä»»åŠ¡æ“ä½œ (å®Œæˆ/æ‹’ç»/å§”æ´¾) æ¨¡æ‹Ÿ
         */
        function handleTaskAction(taskId, action) {
             alert(`ä»»åŠ¡ ID: ${taskId}ï¼Œæ‰§è¡Œæ“ä½œ: ${action}`);
             // æ¨¡æ‹Ÿä»»åŠ¡å®Œæˆ/æ‹’ç»åï¼Œåº”è¯¥ä»åˆ—è¡¨ä¸­ç§»é™¤
             if (action === 'Complete') {
                 const taskIndex = mockTasks.findIndex(t => t.id === taskId);
                 if (taskIndex !== -1) {
                    mockTasks[taskIndex].status = 'Completed';
                    activeTaskId = null; // æ¸…ç©ºå½“å‰é€‰ä¸­
                    initialMessage.classList.remove('hidden'); // æ˜¾ç¤ºåˆå§‹æç¤º
                    taskDataView.classList.add('hidden'); // éšè—è¯¦æƒ…
                    renderTaskList(); // é‡æ–°æ¸²æŸ“åˆ—è¡¨
                 }
             }
        }

        // åˆå§‹åŠ è½½
        document.addEventListener('DOMContentLoaded', () => {
            // 1. ç¡®ä¿å¾…åŠ Tab é€‰ä¸­
            setTaskFilter('Pending');
            // 2. é¦–æ¬¡æ¸²æŸ“åˆ—è¡¨
            renderTaskList();
            // 3. ç»‘å®šè¿”å›æŒ‰é’®äº‹ä»¶ (æ¡Œé¢ç«¯éšè—)
            backButton.onclick = () => {
                detailContainer.classList.add('hidden-mobile');
                taskListContainer.classList.remove('hidden');
            };

            // 4. æ–°å¢é€»è¾‘: æ£€æŸ¥URLå‚æ•°ä»¥æ”¯æŒä»çœ‹æ¿è·³è½¬
            const urlParams = new URLSearchParams(window.location.search);
            const kanbanJumpTaskId = urlParams.get('taskId');
            if (kanbanJumpTaskId) {
                // ç¡®ä¿ ID æ˜¯æ•´æ•°
                const taskId = parseInt(kanbanJumpTaskId, 10);
                const taskExists = mockTasks.find(t => t.id === taskId);

                if (taskExists) {
                    // ç«‹å³é€‰ä¸­å¹¶æ˜¾ç¤ºä»»åŠ¡è¯¦æƒ…
                    selectTask(taskId);
                    // ç¡®ä¿åˆ—è¡¨æ æ˜¾ç¤º (å¦‚æœæ˜¯åœ¨æ¡Œé¢ç«¯)
                    taskListContainer.classList.remove('hidden');
                } else {
                    console.warn(`URLä¸­æŒ‡å®šçš„ä»»åŠ¡ ID ${taskId} ä¸å­˜åœ¨ã€‚`);
                }
            }
        });
    </script>
</body>
</html>